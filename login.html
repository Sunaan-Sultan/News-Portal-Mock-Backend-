<!DOCTYPE html>
<html>
<body>
<h2>Login</h2>

<select id="userSelect"></select>
<button onclick="login()">Login</button>

<script>
const API = "http://localhost:3000";
const userSelect = document.getElementById("userSelect");

fetch(`${API}/users`)
  .then(res => res.json())
  .then(users => {
    users.forEach(u => {
      userSelect.innerHTML += `<option value="${u.id}">${u.name}</option>`;
    });
  });

function login() {
  const id = userSelect.value;
  fetch(`${API}/users/${id}`)
    .then(res => res.json())
    .then(user => {
      localStorage.setItem("user", JSON.stringify(user));
      location.href = "news.html";
    });
}
</script>
</body>
</html>
